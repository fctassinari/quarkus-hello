- name: extract quay hostname
  shell: |
    oc get route {{ quay_registry_name }}-quay -o jsonpath='{.spec.host}' -n {{ quay_namespace }}
  register: quay_hostname_result
  delay: 5
  retries: 10
  until:
    - quay_hostname_result.stdout != ""

- name: Set Quay hostname
  ansible.builtin.set_fact:
    quay_route: "{{ quay_hostname_result.stdout }}"

- name: Quay
  debug:
    msg:
      - "Rota:      https://{{ quay_route }} "
      - "User:      {{ quay_admin_username }}"
      - "Pass:      {{ quay_admin_password }}"
      - "Robot:     {{ quay_robot_account }}"
      - "Namespace: {{ quay_namespace }}"
