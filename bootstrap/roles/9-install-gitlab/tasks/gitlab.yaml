
- name: Create OperatorGroup
  kubernetes.core.k8s:
    state: present
    definition: "{{ lookup('template', 'gitlab-operator-group.yaml.j2') }}"

- name: Create Subscription
  kubernetes.core.k8s:
    state: present
    definition: "{{ lookup('template', 'gitlab-subscription.yaml.j2') }}"

- name: Deploy GitLab Custom Resource
  kubernetes.core.k8s:
    state: present
    definition: "{{ lookup('template', 'gitlab-cr.yaml.j2') }}"
