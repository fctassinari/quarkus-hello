---
- name: 'Install the Pipeline'
  hosts: localhost
  connection: local
  vars:

    company_name: 'smanager'

    pipeline_namespace: "{{ company_name }}-pipeline"
    pipeline_name: "generic-pipeline"

    gitops_operator_namespace: 'openshift-gitops-operator'

    pipeline_operator_namspace: 'openshift-operators'

    acs_central_services_namespace: 'stackrox'
    acs_central_password_base64: 'YWRtaW4xMjM0' #base64
    acs_central_password_plain_text: 'admin1234'
    acs_central_user: 'admin'

    quay_namespace: 'quay'
    quay_admin_username: 'admin'
    quay_admin_email: '{{ company_name }}@redhat.com'
    quay_admin_password: 'admin1234'
    quay_registry_name: '{{ company_name }}-registry'
    quay_robot_account: 'quay_robot'

    #Can obtain status codes from Swagger of quay route/api/v1/discovery
    quay_org_created_success_status_code: '201'
    quay_repo_created_success_status_code: '201'
    quay_robot_created_success_status_code: '201'
    quay_perm_success_status_code: '200'
    quay_access_token: JOKZ4KXF4XXCEG06YHG2XTIB5F3W1FZ7MN6JAOIUNH4LHISBQHU1AV7ZGPIH46UB4A7U5F72BSH8W5QGAUOQPBKC36XSMW380WO7DESTJ2KISXU095928DBX

    sa_cluster_admin: 'cluster-admin-sa'
    sa_cluster_admin_token: 'eyJhbGciOiJSUzI1NiIsImtpZCI6InVPaEs2eG55dUt6eVp6U3NjM3hpTGVhZUVZbW8wYXc2WVZxVlRWNEk3a1UifQ.eyJhdWQiOlsiaHR0cHM6Ly9rdWJlcm5ldGVzLmRlZmF1bHQuc3ZjIl0sImV4cCI6NTMzNjE2OTIyOSwiaWF0IjoxNzM2MTcyODI5LCJpc3MiOiJodHRwczovL2t1YmVybmV0ZXMuZGVmYXVsdC5zdmMiLCJrdWJlcm5ldGVzLmlvIjp7Im5hbWVzcGFjZSI6Imt1YmUtc3lzdGVtIiwic2VydmljZWFjY291bnQiOnsibmFtZSI6ImNsdXN0ZXItYWRtaW4tc2EiLCJ1aWQiOiIzN2JjM2RkMC1lMDVjLTRlYWEtYjQyYy05NmNmMjllYmRmYmQifX0sIm5iZiI6MTczNjE3MjgyOSwic3ViIjoic3lzdGVtOnNlcnZpY2VhY2NvdW50Omt1YmUtc3lzdGVtOmNsdXN0ZXItYWRtaW4tc2EifQ.N_E41giNffPSvgwRdnQsjx7qp7kp-IPK2MZgyahcVs8wC-mQVHE-yOR7IV_73lPMAQkEHAN58u4IifXn8Zr91SLMNx6hZmF4E9mM-9eyEZU2QRl0BxOOfOOe6oXmIpo-qc5av922dXe-8aT0bOIUbgyFvjJlI7bBv8ahrkrZ5efPmN-H2TWQFdCQJi4wg9nJNWgcSvH7LPapu6SiPf2R4_mmzd8QDyWKpRyw4DfHaf8Uu2dv3hL-DwxN0Zn3dqclfhK8cO5ZxTJiO7hIqsES7MaOteM-emPg7pgBiSCU_CD5s1eZ6LGhzpSBYFL0nveHF7uI1dgcJu8cNt-ErQcz6sntV0N3fkjUCez0eorBTaQWqElBsjVvp16rKWLHK2J2cmgjo4xNLPU1_zx7XX2SNFJ52PlwWSLTYKm6EQVOrfMJc_MHtGpCwOxFCwcaxZIh5Aa7IUr80f-hPKHb0E4H-5_FRhsd6EO5d9U8cXWNzevCPSvzdrvy4A-BSOsjW55uIVeUDt0FkxMAdVuDneLl7qU19glW8ghNe7NDwGiCjxkDuq0TcwEUpXKQkAgZ0oU0XdT4ROoYGB74PfG-lQy1rFVglKQjiTAKIy7Lx8xISOMEjDVXnyS3Xa5A3-tLsPBBJwh3vhbVZ9m349pWTE-mNTeAloCrsZKnU87Y0RmYIwU'
    cluster_url: 'apps.cluster-jj9q2.sandbox1234.opentlc.com'

    gogs_namespace: 'gogs'

    reports_namespace: 'reports-repo'
    nexus_namespace: 'nexus'
    nexus_data_volume_capacity: '2Gi'
    nexus_url: "{{ nexus_namespace }}.{{ cluster_url }}"
    nexus_registry_url: "{{ nexus_namespace }}-registry.{{ cluster_url }}"
    nexus_image: 'registry.connect.redhat.com/sonatype/nexus-repository-manager:3.74.0-ubi-1'
    nexus_user: 'admin'
    nexus_password: 'admin1234'

    sonar_namespace: 'sonarqube'
    sonar_database_service_name: 'sonar-postgres'
    sonar_postgresql_database: 'sonar'
    sonar_postgresql_password: 'sonar'
    sonar_postgresql_user: 'sonar'
    sonar_postgresql_volume_capacity: '1Gi'
    sonar_postgresql_memory_limit: '512Mi'
    sonar_postgresql_version: '12-el8'
    sonar_postgresql_max_connections: '100'
    sonar_postgresql_shared_buffers: '12MB'
    sonar_postgresql_admin_password: 'sonar'
    sonar_data_volume_capacity: '2Gi'
    sonar_logs_volume_capacity: '2Gi'
    sonar_conf_volume_capacity: '2Gi'
    sonar_extensions_volume_capacity: '2Gi'
    sonar_image: 'sonarqube:9.9.7-community'
    sonar_url: "{{ sonar_namespace }}.{{ cluster_url }}"
    sonar_token: 'squ_1f321e2b9379120d19443357fd3659871fd8ee96'


  tasks:
#    - name: 'Install Gitops and Pipeline'
#      include_role:
#        name: "1-ocp4-install-gitops-pipeline"

#    - name: 'Install the ACS Central'
#      include_role:
#        name: "2-ocp4-install-acs"

#    - name: 'Install and configure Noobaa Object Storage'
#      include_role:
#        name: "3-opc4-install-noobaa"

#    - name: 'Install and configure Quay'
#      include_role:
#        name: "4-ocp4-install-quay"

#    - name: 'Install CICD Infra'
#      include_role:
#        name: "5-ocp4-install-cicd-infra"

#    - name: 'Install Pipeline'
#      include_role:
#        name: "6-ocp4-install-pipeline"

    - name: 'Install Application'
      include_role:
        name: "7-install-application"

