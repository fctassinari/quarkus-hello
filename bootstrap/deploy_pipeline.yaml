---
- name: 'Install the Pipeline'
  hosts: localhost
  connection: local
  vars:
    app_name: 'quarkus-hello'
    app_namespace: 'dev-quarkus-hello'
    pipeline_namespace: 'sm-pipeline'
    gogs_namespace: 'gogs'
    nexus_namespace: 'nexus'
    reports_namespace: 'reports-repo'
    gitops_operator_namespace: 'openshift-operators'
    pipeline_operator_namespace: 'openshift-operators'
    rhacs_operator_namespace: 'rhacs-operator'
    sonar_token: 'squ_dabcee1eac8ca583dbb9c676a70a826221864993'
    cluster_admin_token: 'sha256~rMbNJiHYf-ocQWtfAdE2gzNKbf0eNqCszXXZRR2fcCI'
    cluster_url: 'apps.cluster-pnjlk.dynamic.redhatworkshops.io'

    SONAR_NAMESPACE: 'sonarqube'
    SONAR_DATABASE_SERVICE_NAME: 'sonar-postgres'
    SONAR_POSTGRESQL_DATABASE: 'sonar-db'
    SONAR_POSTGRESQL_PASSWORD: 'sonar'
    SONAR_POSTGRESQL_USER: 'sonar'
    SONAR_VOLUME_CAPACITY: '1Gi'
    SONAR_MEMORY_LIMIT: '512Mi'
    SONAR_POSTGRESQL_VERSION: '17.2-bullseye'

  tasks:
#    - name: 'Install Gitops'
#      include_role:
#        name: "1-ocp4-install-gitops"

    - name: 'Install CICD Infra'
      include_role:
        name: "2-ocp4-install-cicd"

#    - name: 'Install Pipelines'
#      include_role:
#        name: "3-ocp4-install-pipelines"
#
#    - name: '4-Config GitOps'
#      include_role:
#        name: "4-ocp4-config-gitops"
#
#    - name: '5-Install the ACS Central'
#      include_role:
#        name: "ocp4-install-acs"
#
#    # Include the policies, and some content to show in the demo
#    - name: 'Install the ACS Post Content'
#      include_role:
#        name: "ocp4-post-acs"
