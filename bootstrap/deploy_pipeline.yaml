---
- name: 'Install the Pipeline'
  hosts: localhost
  connection: local
  vars:
    app_name: 'quarkus-hello'
    app_namespace: 'dev-quarkus-hello'
    pipeline_namespace: 'sm-pipeline'
    gogs_namespace: 'gogs'
    sonarqube_namespace: 'sonarqube'
    nexus_namespace: 'nexus'
    reports_namespace: 'reports-repo'
    gitops_operator_namespace: 'openshift-gitops'
    pipeline_operator_namespace: 'pipelines-operator'
    rhacs_operator_namespace: 'rhacs-operator'
    cluster_url: 'apps.cluster-5nkrs.dynamic.redhatworkshops.io'

  tasks:
    - name: 'Install Gitops'
      include_role:
        name: "ocp4-install-gitops"

    - name: 'Install CICD Infra'
      include_role:
        name: "ocp4-install-cicd"

    - name: 'Install Pipelines'
      include_role:
        name: "ocp4-install-pipelines"

    - name: 'Config GitOps'
      include_role:
        name: "ocp4-config-gitops"

    - name: 'Install the ACS Central'
      include_role:
        name: "ocp4-install-acs"

    # Include the policies, and some content to show in the demo
    - name: 'Install the ACS Post Content'
      include_role:
        name: "ocp4-post-acs"
